import{_ as o}from"./plugin-vue_export-helper-x3n3nnut.js";import{r as i,o as p,c as r,b as n,d as a,a as e,e as t}from"./app-zSMpBOKH.js";const c={},l=t(`<h1 id="环境安装3-11语音模型" tabindex="-1"><a class="header-anchor" href="#环境安装3-11语音模型" aria-hidden="true">#</a> 环境安装3.11语音模型</h1><h3 id="m1-mac-anaconda" tabindex="-1"><a class="header-anchor" href="#m1-mac-anaconda" aria-hidden="true">#</a> M1 Mac Anaconda</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token parameter variable">-O</span> https://repo.anaconda.com/miniconda/Miniconda3-latest-MacOSX-arm64.sh
<span class="token function">sh</span> Miniconda3-latest-MacOSX-arm64.sh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>不自动激活</strong> <code>conda config --set auto*activate*base false</code></p><p><strong>撤销设置</strong> <code>conda init --reverse $SHELL</code></p><h3 id="创建激活conda环境" tabindex="-1"><a class="header-anchor" href="#创建激活conda环境" aria-hidden="true">#</a> 创建激活Conda环境</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>conda create <span class="token parameter variable">-n</span> llm_audio <span class="token assign-left variable">python</span><span class="token operator">=</span><span class="token number">3.9</span>
conda activate llm_audio
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>查看环境</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>conda info <span class="token parameter variable">--envs</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">&quot;*&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>删除环境</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>conda remove <span class="token parameter variable">--name</span> llm_audio <span class="token parameter variable">--all</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="安装-modelscope" tabindex="-1"><a class="header-anchor" href="#安装-modelscope" aria-hidden="true">#</a> 安装 modelscope</h3><p><code>audio,cv</code> 版本不兼容需要单独环境安装</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># audio,cv == 1.25.0</span>

pip <span class="token function">install</span> <span class="token string">&quot;modelscope[audio]&quot;</span> <span class="token parameter variable">-f</span> https://modelscope.oss-cn-beijing.aliyuncs.com/releases/repo.html

pip <span class="token function">install</span> <span class="token string">&quot;modelscope[cv]&quot;</span> <span class="token parameter variable">-f</span> https://modelscope.oss-cn-beijing.aliyuncs.com/releases/repo.html
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="modelscope" tabindex="-1"><a class="header-anchor" href="#modelscope" aria-hidden="true">#</a> modelscope</h3>`,15),d={href:"https://www.modelscope.cn/models/iic/speech_paraformer-large_asr_nat-zh-cn-16k-common-vocab8404-pytorch/summary",target:"_blank",rel:"noopener noreferrer"},u=t(`<div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">from</span> modelscope<span class="token punctuation">.</span>pipelines <span class="token keyword">import</span> pipeline
<span class="token keyword">from</span> modelscope<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>constant <span class="token keyword">import</span> Tasks

inference_16k_pipline <span class="token operator">=</span> pipeline<span class="token punctuation">(</span>
    task<span class="token operator">=</span>Tasks<span class="token punctuation">.</span>auto_speech_recognition<span class="token punctuation">,</span>
    model<span class="token operator">=</span><span class="token string">&#39;iic/speech_paraformer-large_asr_nat-zh-cn-16k-common-vocab8404-pytorch&#39;</span><span class="token punctuation">)</span>

rec_result <span class="token operator">=</span> inference_16k_pipline<span class="token punctuation">(</span><span class="token string">&#39;https://isv-data.oss-cn-hangzhou.aliyuncs.com/ics/MaaS/ASR/test_audio/asr_example_zh.wav&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>rec_result<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1),m={href:"https://www.modelscope.cn/models/iic/speech_sambert-hifigan_tts_zh-cn_16k",target:"_blank",rel:"noopener noreferrer"},h=t(`<div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">from</span> modelscope<span class="token punctuation">.</span>outputs <span class="token keyword">import</span> OutputKeys
<span class="token keyword">from</span> modelscope<span class="token punctuation">.</span>pipelines <span class="token keyword">import</span> pipeline
<span class="token keyword">from</span> modelscope<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>constant <span class="token keyword">import</span> Tasks

text <span class="token operator">=</span> <span class="token string">&#39;待合成文本&#39;</span>
model_id <span class="token operator">=</span> <span class="token string">&#39;iic/speech_sambert-hifigan_tts_zh-cn_16k&#39;</span>
sambert_hifigan_tts <span class="token operator">=</span> pipeline<span class="token punctuation">(</span>task<span class="token operator">=</span>Tasks<span class="token punctuation">.</span>text_to_speech<span class="token punctuation">,</span> model<span class="token operator">=</span>model_id<span class="token punctuation">)</span>
output <span class="token operator">=</span> sambert_hifigan_tts<span class="token punctuation">(</span><span class="token builtin">input</span><span class="token operator">=</span>text<span class="token punctuation">,</span> voice<span class="token operator">=</span><span class="token string">&#39;zhitian_emo&#39;</span><span class="token punctuation">)</span>
wav <span class="token operator">=</span> output<span class="token punctuation">[</span>OutputKeys<span class="token punctuation">.</span>OUTPUT_WAV<span class="token punctuation">]</span>
<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">&#39;output.wav&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;wb&#39;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
    f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>wav<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="huggingface" tabindex="-1"><a class="header-anchor" href="#huggingface" aria-hidden="true">#</a> Huggingface</h3><h3 id="issues" tabindex="-1"><a class="header-anchor" href="#issues" aria-hidden="true">#</a> Issues</h3>`,3),v={id:"importerror-cannot-import-name-kaiser-from-scipy-signal",tabindex:"-1"},k=n("a",{class:"header-anchor",href:"#importerror-cannot-import-name-kaiser-from-scipy-signal","aria-hidden":"true"},"#",-1),b={href:"https://github.com/kan-bayashi/ParallelWaveGAN/issues/430",target:"_blank",rel:"noopener noreferrer"},g=t(`<p><code>pip install scipy==1.10.0 </code></p><h4 id="ttsfrd-has-no-attribute-ttsfrontendengine" tabindex="-1"><a class="header-anchor" href="#ttsfrd-has-no-attribute-ttsfrontendengine" aria-hidden="true">#</a> &#39;ttsfrd&#39; has no attribute &#39;TtsFrontendEngine&#39;</h4><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>raise type(e)(f&#39;{obj_cls.name}: {e}&#39;) from e
AttributeError: TextToSpeechSambertHifiganPipeline: SambertHifigan: module &#39;ttsfrd&#39; has no attribute &#39;TtsFrontendEngine&#39;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div>`,3),_={href:"https://github.com/FunAudioLLM/CosyVoice",target:"_blank",rel:"noopener noreferrer"},f={href:"https://modelscope.oss-cn-beijing.aliyuncs.com/releases/ttsfrd-0.0.3-cp39-cp39-macosx_12_0_x86_64.whl",target:"_blank",rel:"noopener noreferrer"};function y(x,w){const s=i("ExternalLinkIcon");return p(),r("div",null,[l,n("p",null,[n("a",d,[a("Paraformer语音识别-中文-通用-16k-离线-large-pytorch"),e(s)])]),u,n("p",null,[n("a",m,[a("语音合成-中文-多情感领域-16k-多发音人"),e(s)])]),h,n("h4",v,[k,a(),n("a",b,[a("ImportError: cannot import name 'kaiser' from 'scipy.signal' "),e(s)])]),g,n("p",null,[n("a",_,[a("CosyVoice"),e(s)])]),n("p",null,[n("a",f,[a("ttsfrd-0.0.3-cp39-cp39-macosx_12_0_x86_64.whl"),e(s)])])])}const E=o(c,[["render",y],["__file","env_audio.html.vue"]]);export{E as default};
